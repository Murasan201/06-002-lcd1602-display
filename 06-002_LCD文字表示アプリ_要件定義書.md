### 文書番号: 06-002

## 1. アプリ名
- アプリ名: LCD文字表示アプリ

## 2. 概要
LCD1602モジュール（I²CバックパックまたはSPIインターフェース付き）を用いて、Raspberry Piから任意の文字列を表示するPythonアプリケーションです。本アプリを通じて、I²C/SPI通信の基礎とLCD1602制御方法を学ぶハンズオン教材として活用します。

## 3. 目的
- I²C/SPI通信プロトコルの基本理解
- LCD1602モジュール制御の習得
- Pythonによる外部周辺機器制御技術の習得

## 4. 対象利用者
- プログラミング初心者
- Raspberry Pi入門者
- 電子工作学習者

## 5. システム構成
| コンポーネント         | 役割                                                    |
|------------------------|---------------------------------------------------------|
| Raspberry Pi 5         | I²C/SPI通信、スクリプト実行                            |
| ブレッドボード         | LCD1602モジュール固定および配線                         |
| ジャンパーワイヤ       | Raspberry PiとLCD1602モジュールの接続                  |
| LCD1602ディスプレイ    | 文字表示（16文字×2行）                                  |
| ポテンショメータ       | コントラスト調整                                        |

## 6. ハードウェア要件
- Raspberry Pi 5本体
- microSDカード（Raspberry Pi OSインストール済み）
- LCD1602ディスプレイモジュール（I²CバックパックまたはSPIインターフェース付き）
- ジャンパーワイヤ（オス–オス）
- ポテンショメータ（10kΩ程度）
- 抵抗（必要に応じて）
- 電源（公式5V電源アダプタ）

## 7. ソフトウェア要件
- OS：Raspberry Pi OS（最新推奨）
- 言語：Python 3.9以上
- ライブラリ：
  - smbus2（I²C通信）
  - spidev（SPI通信）
  - RPLCDまたはluma.lcd（LCD1602制御）
  - argparse（標準）

## 8. 機能要件
1. **通信初期化**
   - I²CまたはSPIバスの初期化を行い、LCD1602モジュールを使用可能にする
2. **文字列表示**
   - コマンドライン引数または対話入力で指定した文字列をLCD1602の指定行に表示
3. **行指定表示**
   - 第1行／第2行（16文字×2行）を選択して表示
4. **スクロール表示**
   - 文字列が16文字を超える場合、指定間隔で横スクロール表示
5. **コントラスト調整**
   - 実行時引数でV0ピンへの電圧を調整（0～255）
6. **表示クリア**
   - 画面クリアコマンドでLCD1602表示をリセット

## 9. 非機能要件
- **可読性**: コードはPEP8準拠とし、関数ごとにコメントを記述
- **保守性**: モジュール化し、I²C/SPI切り替えが容易な設計
- **移植性**: 他のI²C/SPIデバイスにも対応しやすい抽象化レイヤーを用意
- **安全性**: コントラスト調整範囲のバリデーション実装

## 11. テスト要件
- **I²C通信テスト**: `i2cdetect`でLCD1602モジュールのアドレス検出
- **SPI通信テスト**: `spidev`でバス初期化とデータ送信確認
- **文字列長テスト**: 短文／長文で正常表示・スクロール動作を確認
- **異常系テスト**: 無効なバス指定や無効なアドレス時のエラーハンドリング確認

## 12. 受け入れ基準
1. 指定文字列がLCD1602の正しい行に表示される
2. 横スクロール表示が指定通り動作する
3. コントラスト調整がLCD表示に反映される
4. 画面クリア機能で表示がリセットされる
5. 不正な引数時に適切なエラーメッセージが表示される

---
以上の要件をもとに、LCD文字表示アプリのプロトタイプを開発してください。
